<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rewards Start Here</title>
  <meta name="description" content="Join our referral program and start earning rewards." />
  <link rel="icon" type="image/png" href="assets/favicon.png">
  <style>
    :root{
      --bg:#0f1116; --card:#151821; --text:#f4f5f7; --muted:#9aa3b2;
      --gold1:#f5d67b; --gold2:#b9922f; 
      --goldGlow: rgba(245,214,123,.35); --goldGlowHover: rgba(245,214,123,.55);
      --input-bg:#0f1220; --input-brd:#2a3040; --focus:#3a7afe;
    }
    html, body { height: 100%; margin:0; }
    * { box-sizing: border-box; }
    body{
      display:flex; justify-content:center; align-items:center;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
      color:var(--text);
      background: url('assets/background.jpg') no-repeat center center;
      background-size: cover;
      position: relative;
      padding: 24px;
      min-height:100vh;
    }
    body::before{
      content:"";
      position:absolute; inset:0;
      background: rgba(15,17,22,0.75);
      z-index:0;
    }
    .wrap{ position:relative; z-index:1; width:100%; max-width:720px; }
    .card{
      background:var(--card); border:1px solid rgba(255,255,255,.06); border-radius:18px;
      box-shadow: 0 18px 60px rgba(0,0,0,.45); padding: 28px; text-align:center;
    }
    .logo{
      display:block; max-width:180px; width:60%;
      margin: 0 auto 18px; filter: drop-shadow(0 6px 16px rgba(0,0,0,.35));
    }
    h1{ margin:0 0 10px; font-size: clamp(24px, 5vw, 34px); }
    p.lead{ margin:0 0 22px; color:var(--muted); max-width:56ch; margin-left:auto; margin-right:auto; }
    form { width:100%; text-align:left; }
    .field{ margin:0 0 12px; }
    label{ display:block; margin:0 0 6px; font-size:14px; color:#d6dae3; }
    input{
      display:block; width:100%; height:48px; padding:12px 14px; border-radius:12px;
      background:var(--input-bg); border:1px solid var(--input-brd); color:var(--text);
      outline:none; transition: border-color .15s ease, box-shadow .15s ease;
    }
    input::placeholder{ color:#7f8897; }
    input:focus{ border-color:var(--focus); box-shadow:0 0 0 3px rgba(58,122,254,.25); }
    .cta{
      appearance:none; border:0; width:100%; height:50px; margin-top:10px;
      border-radius:12px; font-weight:700; font-size:15px; letter-spacing:.2px; color:#1a1a1a;
      background:linear-gradient(180deg,var(--gold1) 0%,var(--gold2) 100%);
      box-shadow:0 10px 24px var(--goldGlow); cursor:pointer;
      transition:transform .06s ease, box-shadow .15s ease, filter .15s ease;
    }
    .cta:hover{ box-shadow:0 14px 30px var(--goldGlowHover); filter:brightness(1.02); }
    .cta:active{ transform:translateY(1px); }
    .cta[disabled]{ opacity:.75; cursor:not-allowed; }
    .note{ margin-top:10px; color:var(--muted); font-size:12px; text-align:center; }
    .status{ margin-top:14px; padding:12px 14px; border-radius:12px; display:none; text-align:center; }
    .status.ok{ background:rgba(34,197,94,.10); border:1px solid rgba(34,197,94,.25); color:#a7f3d0; }
    .status.err{ background:rgba(239,68,68,.08); border:1px solid rgba(239,68,68,.25); color:#fecaca; }
    footer{ margin-top:18px; text-align:center; color:var(--muted); font-size:12px; }
    .hp{ position:absolute; left:-9999px; opacity:0; height:0; width:0; pointer-events:none; }
    @media (max-width: 480px) {
      .card { padding: 20px; }
      .logo { width:70%; max-width:160px; }
      h1 { font-size:22px; }
      p.lead { font-size:14px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <img class="logo" src="assets/logo.png" alt="MySafe Global Vaults" />
      <h1>Refer a client. Earn up to AED 500.</h1>
      <p class="lead">Not a MySafe customer? No problem-get rewarded when your referral rents a box. T&Cs apply.</p>
      <form id="refForm" novalidate>
        <div class="field">
          <label for="name">Full Name</label>
          <input id="name" name="name" type="text" required placeholder="John Doe" />
        </div>
        <div class="field">
          <label for="email">Email</label>
          <input id="email" name="email" type="email" placeholder="you@example.com" />
        </div>
        <div class="field">
          <label for="phone">Phone (optional)</label>
          <input id="phone" name="phone" type="tel" placeholder="+971 5x xxx xxxx" />
        </div>
        <input class="hp" type="text" id="company" name="company" autocomplete="off" aria-hidden="true" />
        <button id="submitBtn" type="submit" class="cta">Join Now</button>
        <div id="ok"  class="status ok" role="status" aria-live="polite">✅ Thank you! We’ll contact you shortly.</div>
        <div id="err" class="status err" role="alert" aria-live="assertive">⚠️ Something went wrong. Please try again.</div>
        <p class="note">By submitting, you agree to be contacted about our referral program.</p>
      </form>
    </div>
    <footer>© <span id="y"></span> MySafe Global Vaults</footer>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <script>
    const EMAILJS_PUBLIC_KEY  = "MskX0ehvhVKKpAOvy";
    const EMAILJS_SERVICE_ID  = "service_jht453z";
    const EMAILJS_TEMPLATE_ID = "template_ovgszua";
    emailjs.init({ publicKey: EMAILJS_PUBLIC_KEY });
    const form = document.getElementById("refForm");
    const okBox = document.getElementById("ok");
    const errBox = document.getElementById("err");
    const submitBtn = document.getElementById("submitBtn");
    document.getElementById("y").textContent = new Date().getFullYear();
    function show(el){ el.style.display = "block"; }
    function hide(el){ el.style.display = "none"; }
    function disable(btn, state){ btn.disabled = state; btn.textContent = state ? "Sending..." : "Join Now"; }
    function validate(){
      const name  = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const phone = document.getElementById("phone").value.trim();
      if(!name) return "Please enter your name.";
      if(!email && !phone) return "Enter an email or phone.";
      if(email && !/^\S+@\S+\.\S+$/.test(email)) return "Enter a valid email address.";
      return "";
    }
    const allowEffects = window.matchMedia('(prefers-reduced-motion: no-preference)').matches;
    function confettiBurst() {
      if (!allowEffects || !window.confetti) return;
      confetti({ particleCount: 60, spread: 55, origin: { x: 0.15, y: 0.2 } });
      confetti({ particleCount: 60, spread: 55, origin: { x: 0.85, y: 0.2 } });
      setTimeout(() => {
        confetti({ particleCount: 120, spread: 70, startVelocity: 45, ticks: 120, origin: { y: 0.2 } });
      }, 200);
    }
    form.addEventListener("submit", async (e)=>{
      e.preventDefault();
      hide(okBox); hide(errBox);
      if(document.getElementById("company").value) return;
      const v = validate();
      if(v){ show(errBox); errBox.textContent = v; return; }
      const data = {
        name:  document.getElementById("name").value.trim(),
        email: document.getElementById("email").value.trim(),
        phone: document.getElementById("phone").value.trim(),
        source: new URLSearchParams(window.location.search).get("src") || "direct",
        page_url: window.location.href,
        user_agent: navigator.userAgent
      };
      disable(submitBtn, true);
      try{
        await emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, data);
        hide(errBox); show(okBox);
        confettiBurst();
        form.reset();
      }catch(err){
        hide(okBox); show(errBox);
        errBox.textContent = "Send failed. Please try again.";
        console.error(err);
      }finally{
        disable(submitBtn, false);
      }
    });
  </script>
</body>
</html>
